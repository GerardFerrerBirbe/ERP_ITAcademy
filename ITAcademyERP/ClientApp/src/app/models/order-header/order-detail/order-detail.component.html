<h2>{{editionMode ? 'Fitxa' : 'Nova'}} Comanda</h2>
<form class="form-horizontal" novalidate
  (ngSubmit)="save()" [formGroup]="formGroup">
  <table>
    <tr>
      <td>
        <div class="form-group">
          <label for="orderNumberId">Número Comanda</label>
          <div>
            <input class="form-control"
            id="orderNumberId"
            type="number"
            required
            formControlName="orderNumber"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="orderStateIdId">Estat</label>
          <div>
            <input class="form-control"
            id="orderStateIdId"
            type="number"
            required
            formControlName="orderStateId"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="orderPriorityIdId">Prioritat</label>
          <div>
            <input class="form-control"
            id="orderPriorityIdId"
            type="number"
            required
            formControlName="orderPriorityId"/>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class="form-group">
          <label for="employeeIdId">Empleat</label>
          <div>
            <input class="form-control"
            id="employeeIdId"
            type="number"
            required
            formControlName="employeeId"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="clientIdId">Client</label>
          <div>
            <input class="form-control"
            id="clientIdId"
            type="number"
            required
            formControlName="clientId"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="deliveryAddressIdId">Adreça</label>
          <div>
            <input class="form-control"
            id="deliveryAddressIdId"
            type="number"
            required
            formControlName="deliveryAddressId"/>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class="form-group">
          <label for="creationDateId">Data Creació</label>
          <div>
            <input class="form-control"
            id="creationDateId"
            type="text"
            required
            formControlName="creationDate"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="assignToEmployeeDateId">Data Assignació Empleat</label>
          <div>
            <input class="form-control"
            id="assignToEmployeeDateId"
            type="text"
            required
            formControlName="assignToEmployeeDate"/>
          </div>
        </div>
      </td>
      <td>
        <div class="form-group">
          <label for="finalisationDateId">Data Finalització</label>
          <div>
            <input class="form-control"
            id="finalisationDateId"
            type="text"
            required
            formControlName="finalisationDate"/>
          </div>
        </div>
      </td>
    </tr>   
  </table>      

  <div class="form-group">
    <button class="btn btn-primary" (click)="addOrderLine()">Afegir Línia Comanda</button>
  </div>
  
  <div formArrayName="orderLines"
        *ngFor="let orderLine of orderLines.controls; let i = index;">
    <div [formGroupName]="i">      
      <div class="form-group">    
        <label class="col-md-2 control-label" [attr.for]="'productId' + i">
          Id Producte
        </label>            
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'productId' + i" type="number" formControlName="productId" />
        </div>
      </div>    
      <div class="form-group">  
        <label class="col-md-2 control-label" [attr.for]="'unitPrice' + i">
          Preu unitari
        </label>              
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'unitPrice' + i" type="number" formControlName="unitPrice" />
        </div>
      </div>          
      <div class="form-group">  
        <label class="col-md-2 control-label" [attr.for]="'vat' + i">
          IVA
        </label>            
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'vat' + i" type="number" formControlName="vat" />
        </div>
      </div>          
      <div class="form-group"> 
        <label class="col-md-2 control-label" [attr.for]="'quantity' + i">
          Quantitat
        </label>          
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'quantity' + i" type="number" formControlName="quantity" />
        </div>
      </div>         
      <div class="form-group">
        <div class="col-md-10">
          <button type="button" class="btn btn-danger pull-right" (click)="deleteOrderLine(i)">Borrar línia</button>
        </div>
      </div>             
    </div>  
  </div>

  <div class="form-group">
    <div>
      <button type="submit">Guardar</button>
    </div>
  </div>

</form>

<button (click)="goBack()">Tornar</button>
