<h2>{{editionMode ? 'Fitxa' : 'Nou'}} Client</h2>
<form class="form-horizontal" novalidate
  (ngSubmit)="save()" [formGroup]="formGroup">
  <div class="form-group">
    <label for="emailId">Email</label>
    <div>
      <input class="form-control"
      id="emailId"
      type="string"
      required
      formControlName="email"/>
    </div>
  </div>  
  <div class="form-group">
    <label for="firstNameId">Nom</label>
    <div>
      <input class="form-control"
      id="firstNameId"
      type="string"
      required
      formControlName="firstName"/>
    </div>
  </div>
  <div class="form-group">
    <label for="lastNameId">Cognoms</label>
    <div>
      <input class="form-control"
      id="lastNameId"
      type="string"
      required
      formControlName="lastName"/>
    </div>
  </div> 
  
  <div class="form-group">
    <label>Direccions</label>
    <button class="btn btn-primary" (click)="addAddress()">Afegir adreça</button>
  </div>
  
  <div formArrayName="addresses"
        *ngFor="let address of addresses.controls; let i = index;">
    <div [formGroupName]="i">      
      <div class="form-group">    
        <label class="col-md-2 control-label" [attr.for]="'name' + i">
          Nom adreça
        </label>            
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'name' + i" type="text" formControlName="name" />
        </div>
      </div>    
      <div class="form-group">  
        <label class="col-md-2 control-label" [attr.for]="'type' + i">
          Tipus adreça
        </label>              
        <div class="col-md-8">
          <input class="form-control" [attr.id]="'type' + i" type="text" formControlName="type" />
        </div>
      </div>               
      <div class="form-group">
        <div class="col-md-10">
          <button type="button" class="btn btn-danger pull-right" (click)="deleteAddress(i)">Borrar adreça</button>
        </div>
      </div>             
    </div>  
  </div>
  
  <div class="form-group">
    <div>
      <button type="submit">Guardar</button>
    </div>
  </div>
</form>

<button (click)="goBack()">Tornar</button>

<fieldset *ngIf="isAdminUser()">
  <div>
    <label><b>Nº comandes:</b></label>
    <div>{{ totalOrderNumberByClient }}</div>
  </div>
  <div>
    <label><b>Total facturat:</b></label>
    <div>{{ totalOrderAmountByClient | currency:'EUR'}}</div>
  </div>
</fieldset>
<fieldset>Comandes actuals
  <table *ngIf="currentOhs">
    <thead>
      <tr>
        <th>Id</th>
        <th>Número Comanda</th>
        <th>Adreça</th>
        <th>Client</th>
        <th>Empleat</th>
        <th>Estat Ordre</th>
        <th>Prioritat</th>
        <th>Data Creació</th> 
        <th>Data Assignació Empleat</th> 
        <th>Data Finalització</th> 
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let currentOh of currentOhs">
        <td>{{ currentOh.id }}</td>
        <td>{{ currentOh.orderNumber }}</td>
        <td>{{ currentOh.address }}</td>
        <td>{{ currentOh.client }}</td>
        <td>{{ currentOh.employee }}</td>
        <td>{{ currentOh.orderState }}</td>
        <td>{{ currentOh.orderPriority }}</td>
        <td>{{ currentOh.creationDate | date: 'dd/MM/yyyy' }}</td>
        <td>{{ currentOh.assignToEmployeeDate | date: 'dd/MM/yyyy' }}</td>
        <td>{{ currentOh.finalisationDate | date: 'dd/MM/yyyy' }}</td>     
      </tr>
    </tbody>
  </table>
</fieldset>

<fieldset>Històric de comandes
  <table *ngIf="oldOhs">
    <thead>
      <tr>
        <th>Id</th>
        <th>Número Comanda</th>
        <th>Adreça</th>
        <th>Client</th>
        <th>Empleat</th>
        <th>Estat Ordre</th>
        <th>Prioritat</th>
        <th>Data Creació</th> 
        <th>Data Assignació Empleat</th> 
        <th>Data Finalització</th> 
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let oldOh of oldOhs">
        <td>{{ oldOh.id }}</td>
        <td>{{ oldOh.orderNumber }}</td>
        <td>{{ oldOh.address }}</td>
        <td>{{ oldOh.client }}</td>
        <td>{{ oldOh.employee }}</td>
        <td>{{ oldOh.orderState }}</td>
        <td>{{ oldOh.orderPriority }}</td>
        <td>{{ oldOh.creationDate | date: 'dd/MM/yyyy' }}</td>
        <td>{{ oldOh.assignToEmployeeDate | date: 'dd/MM/yyyy' }}</td>
        <td>{{ oldOh.finalisationDate | date: 'dd/MM/yyyy' }}</td>     
      </tr>
    </tbody>
  </table>
</fieldset>